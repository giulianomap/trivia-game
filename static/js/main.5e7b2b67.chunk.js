(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},119:function(e,t){},120:function(e,t,a){e.exports=a(239)},129:function(e,t,a){},136:function(e,t){},138:function(e,t){},172:function(e,t){},173:function(e,t){},238:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(0),c=a.n(r),s=a(51),i=a.n(s),o=(a(129),a(24)),l=a(28),u=a(52),m=a(8),d=a(9),h=a(12),p=a(10),b=a(15),g=a(13);function f(e,t,a,n){return{type:"CLEAR_SCORE",name:e,email:t,score:a,assertions:n}}var E=a(116),v=a.n(E),O=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={name:"",email:"",goToGame:!1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.provokeApis=a.provokeApis.bind(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"provokeApis",value:function(){var e=this.props,t=e.getDataPlayer,a=e.getToken,n=e.getTrivia,r=e.token,c=this.state,s=c.name,i=c.email;t(s,i),a().then((function(){n(r),localStorage.setItem("token",r)})),this.setState({goToGame:!0});var o={player:{name:s,assertions:0,score:0,gravatarEmail:i}};localStorage.setItem("state",JSON.stringify(o))}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.goToGame;return c.a.createElement("div",{className:"player-page"},n&&c.a.createElement(l.a,{to:"/game"}),c.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),c.a.createElement("h1",{className:"title-started"},"Get started!"),c.a.createElement("input",{className:"user-input",type:"text",placeholder:"Nickname","data-testid":"input-player-name",name:"name",onChange:this.handleChange}),c.a.createElement("input",{className:"user-input",type:"email",placeholder:"Email","data-testid":"input-gravatar-email",name:"email",onChange:this.handleChange}),c.a.createElement("button",{className:"transition-button",type:"button","data-testid":"btn-play",disabled:!(t&&a),onClick:this.provokeApis},"PLAY"))}}]),t}(c.a.Component),y=Object(n.b)((function(e){return{token:e.fetchApis.token}}),(function(e){return{getDataPlayer:function(t,a){return e(function(e,t){return{type:"DATA_PLAYER",name:e,email:t}}(t,a))},getToken:function(t){return e((function(e){return e({type:"REQUEST_TOKEN"}),fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){return console.log(t.token),e({type:"DATA_TOKEN",tok:t.token})}))}))},getTrivia:function(t){return e((a=t,function(e){return e({type:"REQUEST_TRIVIA"}),fetch("".concat("https://opentdb.com/api.php?amount=5&token=").concat(a)).then((function(e){return e.json()})).then((function(t){return console.log(t),e({type:"DATA_TRIVIA",dataGame:t.results})}))}));var a}}}))(O),k=a(53),w=a(36),j=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.email,n=e.score,r=Object(w.MD5)(a).toString();return c.a.createElement("div",{className:"header-player"},c.a.createElement("p",{"data-testid":"header-player-name"},"Player:",c.a.createElement("br",null),t),c.a.createElement("img",{className:"img-gravatar","data-testid":"header-profile-picture",alt:"",src:"https://www.gravatar.com/avatar/".concat(r)}),c.a.createElement("p",null,"Score: ",c.a.createElement("br",null),c.a.createElement("span",{"data-testid":"header-score"},n)))}}]),t}(c.a.Component),S=Object(n.b)((function(e){return{name:e.dataPlayerReducer.name,email:e.dataPlayerReducer.email,score:e.dataPlayerReducer.score}}))(j);function R(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}var A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).answered=a.answered.bind(Object(b.a)(a)),a.calculateScore=a.calculateScore.bind(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("component answers did mount")}},{key:"answered",value:function(e,t,a){(0,this.props.answerRedux)(),"correct"===e.target.id&&this.calculateScore(t,a)}},{key:"calculateScore",value:function(e,t){var a=10+e*{easy:1,medium:2,hard:3}[t];(0,this.props.getScore)(a);var n=this.props,r={player:{name:n.name,assertions:n.assertions+1,score:n.score+a,gravatarEmail:n.email}};localStorage.setItem("state",JSON.stringify(r))}},{key:"render",value:function(){var e=this,t=this.props,a=t.correct,n=t.incorrect,r=t.randomAnswers,s=t.answeredOne,i=t.timecount,o=t.level;return 0===r.length?c.a.createElement("div",{className:"answers-button"},c.a.createElement("button",{"data-testid":"correct-answer",id:"correct",onClick:function(t){return e.answered(t,i,o)},disabled:s,className:s?"green-border":"answ"},R(a)),n.map((function(t,a){return c.a.createElement("button",{key:t,id:"incorrect",className:s?"red-border":"answ","data-testid":"wrong-answer-".concat(a),onClick:function(t){return e.answered(t,i,o)},disabled:s},R(t))}))):c.a.createElement("div",{className:"answers-button"},r.length>0&&r.map((function(t,n){return t===a?c.a.createElement("button",{key:t,"data-testid":"correct-answer",id:"correct",onClick:function(t){return e.answered(t,i,o)},disabled:s,className:s?"green-border":"answ"},R(t)):c.a.createElement("button",{key:t,id:"incorrect",className:s?"red-border":"answ","data-testid":"wrong-answer-".concat(n),onClick:function(t){return e.answered(t,i,o)},disabled:s},R(t))})))}}]),t}(c.a.Component),N=Object(n.b)((function(e){return{dataGame:e.fetchApis.dataGame,answeredOne:e.answeredReducer.answeredOne,score:e.dataPlayerReducer.score,assertions:e.dataPlayerReducer.assertions,name:e.dataPlayerReducer.name,email:e.dataPlayerReducer.email}}),(function(e){return{answerRedux:function(t){return e({type:"ANSWERED"})},getScore:function(t){return e({type:"GET_SCORE",points:t})}}}))(A);var T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={i:0,count:30,numberQuestions:1,randomAnswers:[]},a.shuffle=a.shuffle.bind(Object(b.a)(a)),a.next=a.next.bind(Object(b.a)(a)),a.beginTimer=a.beginTimer.bind(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.beginTimer(),console.log("component game did mount")}},{key:"componentDidUpdate",value:function(){var e=this.state.count,t=this.props,a=t.answeredOne,n=t.answerRedux;(0===e||a)&&(clearInterval(this.myInterval),n())}},{key:"beginTimer",value:function(){var e=this;clearInterval(this.myInterval),this.myInterval=setInterval((function(){e.setState((function(e){return{count:Math.max(e.count-1,0)}}))}),1e3)}},{key:"shuffle",value:function(){var e=this.props.dataGame,t=this.state.i,a=e[t+1].correct_answer,n=e[t+1].incorrect_answers,r=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}([].concat(Object(k.a)(n),[a]));this.setState({randomAnswers:r})}},{key:"next",value:function(){(0,this.props.clearAnswered)(),this.setState({count:30}),this.beginTimer();var e=this.state.numberQuestions;this.setState({numberQuestions:e+1}),e<5&&this.shuffle();var t=this.state.i;return t<4?this.setState({i:t+1}):4===t?this.setState({i:0}):this.setState({i:t})}},{key:"render",value:function(){var e=this.props,t=e.dataGame,a=e.isFetching,n=e.answeredOne,r=this.state,s=r.i,i=r.count,o=r.numberQuestions;return c.a.createElement("div",null,a&&c.a.createElement("p",null,"Loading..."),!a&&t.length>0&&c.a.createElement("section",{className:"game"},c.a.createElement("div",null,c.a.createElement(S,null),c.a.createElement("div",{className:"question"},c.a.createElement("h3",{"data-testid":"question-category"},"CATEGORY - ",R(t[s].category)),c.a.createElement("h3",{"data-testid":"question-text"},"QUESTION - ",R(t[s].question))),c.a.createElement(N,{correct:t[s].correct_answer,incorrect:t[s].incorrect_answers,randomAnswers:this.state.randomAnswers,i:s,timecount:i,level:t[s].difficulty})),c.a.createElement("h3",{className:"timer"},"Time left: ",i)),n&&c.a.createElement("button",{className:"transition-button","data-testid":"btn-next",onClick:this.next},"NEXT"),6===o&&c.a.createElement(l.a,{to:"/score"}))}}]),t}(c.a.Component),C=Object(n.b)((function(e){return{dataGame:e.fetchApis.dataGame,isFetching:e.fetchApis.isFetching,answeredOne:e.answeredReducer.answeredOne}}),(function(e){return{clearAnswered:function(t){return e({type:"CLEAR"})},answerRedux:function(t){return e({type:"ANSWERED"})}}}))(T),I=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).storageRanking=a.storageRanking.bind(Object(b.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.storageRanking()}},{key:"storageRanking",value:function(){var e=this.props,t=e.name,a=e.score,n=e.hash,r={name:t,score:a,picture:"https://www.gravatar.com/avatar/".concat(n)};if(localStorage.getItem("ranking")){var c=[].concat(Object(k.a)(JSON.parse(localStorage.getItem("ranking"))),[r]);localStorage.setItem("ranking",JSON.stringify(c))}else localStorage.setItem("ranking",JSON.stringify([r]))}},{key:"render",value:function(){var e=this.props,t=e.clearPlayer,a=e.assertions,n=e.score;return c.a.createElement("div",null,c.a.createElement(S,null),c.a.createElement("section",{className:"message"},c.a.createElement("h2",null,"Feedback message:"),a>=3&&c.a.createElement("p",{"data-testid":"feedback-text"},"You rock!"),a<3&&c.a.createElement("p",{"data-testid":"feedback-text"},"Could be better..."),c.a.createElement("h2",null,"See your results:"),c.a.createElement("p",null,"Your total score is ",c.a.createElement("span",{"data-testid":"feedback-total-score"},n)," points."),c.a.createElement("p",null,"You got ",c.a.createElement("span",{"data-testid":"feedback-total-question"},a)," answers right.")),c.a.createElement("section",{className:"buttons-feedback"},c.a.createElement(o.b,{to:"/"},c.a.createElement("button",{className:"transition-button",type:"button","data-testid":"btn-play-again",onClick:function(){return t("","",0,0)}},"Play again")),c.a.createElement(o.b,{to:"/ranking"},c.a.createElement("button",{className:"transition-button",type:"button","data-testid":"btn-ranking"},"See ranking"))))}}]),t}(c.a.Component),P=Object(n.b)((function(e){return{assertions:e.dataPlayerReducer.assertions,name:e.dataPlayerReducer.name,score:e.dataPlayerReducer.score,hash:Object(w.MD5)(e.dataPlayerReducer.email).toString()}}),(function(e){return{clearPlayer:function(t,a,n,r){return e(f(t,a,n,r))}}}))(I),_=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score})),t=this.props.clearPlayer;return c.a.createElement("div",null,c.a.createElement("h1",{className:"title-rank","data-testid":"ranking-title"},"Here is the Great Trivia Ranking!"),c.a.createElement("ol",null,e.map((function(e,t){return c.a.createElement("li",{className:"each-rank"},c.a.createElement("img",{className:"gravatar",src:"https://www.gravatar.com/avatar/".concat(Object(w.MD5)(e.email).toString()),alt:""}),c.a.createElement("p",{"data-testid":"player-name-".concat(t)},"- PLAYER: ",e.name," -"),c.a.createElement("p",{"data-testid":"player-score-".concat(t)},"-- SCORE: ",e.score,"."))}))),c.a.createElement(o.b,{to:"/"},c.a.createElement("button",{className:"transition-button",type:"button","data-testid":"btn-go-home",onClick:function(){return t("","",0,0)}},"Play again")))}}]),t}(c.a.Component),x=Object(n.b)(null,(function(e){return{clearPlayer:function(t,a,n,r){return e(f(t,a,n,r))}}}))(_),D=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h1",{"data-testid":"settings-title"},"Trivia Settings"))}}]),t}(c.a.Component);a(238);var G=a(27),L=a(118),M=a(17),F={isFetching:!1,token:"",dataGame:[],error:""};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOKEN":return Object(M.a)({},e,{isFetching:!0});case"DATA_TOKEN":return Object(M.a)({},e,{isFetching:!1,token:t.tok});case"REQUEST_TRIVIA":return Object(M.a)({},e,{isFetching:!0});case"DATA_TRIVIA":return Object(M.a)({},e,{isFetching:!1,dataGame:t.dataGame});case"FAILURE":return Object(M.a)({},e,{isFetching:!1,error:t.error});default:return e}},J={name:"",email:"",score:0,assertions:0};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_PLAYER":return Object(M.a)({},e,{name:t.name,email:t.email});case"GET_SCORE":return Object(M.a)({},e,{score:e.score+t.points,assertions:e.assertions+1});case"CLEAR_SCORE":return Object(M.a)({},e,{name:t.name,email:t.email,score:t.score,assertions:t.assertions});default:return e}},Y={answeredOne:!1};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANSWERED":return Object(M.a)({},e,{answeredOne:!0});case"CLEAR":return Object(M.a)({},e,{answeredOne:!1});default:return e}},V=a(119),W=a.n(V),K=Object(G.c)({fetchApis:Q,dataPlayerReducer:U,answeredReducer:q,timeReducer:W.a}),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,B=Object(G.e)(K,X(Object(G.a)(L.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(n.a,{store:B},c.a.createElement((function(){return c.a.createElement(o.a,null,c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/",component:y}),c.a.createElement(l.b,{exact:!0,path:"/game",component:C}),c.a.createElement(l.b,{exact:!0,path:"/score",component:P}),c.a.createElement(l.b,{exact:!0,path:"/ranking",component:x}),c.a.createElement(l.b,{exact:!0,path:"/settings",component:D})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[120,1,2]]]);
//# sourceMappingURL=main.5e7b2b67.chunk.js.map